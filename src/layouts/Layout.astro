---
interface Props {
    title: string
}
import { ViewTransitions } from 'astro:transitions'
import Navigation from '../components/Navigation.astro'
const { title } = Astro.props
---

<!doctype html>
<html lang='en'>
    <head>
        <meta charset='UTF-8' />
        <meta
            name='description'
            content='Personal Website for Sherif Elmetwally'
        />
        <meta name='viewport' content='width=device-width' />
        <link rel='preconnect' href='https://fonts.googleapis.com' />
        <link rel='preconnect' href='https://fonts.gstatic.com' crossorigin />
        <script
            type='module'
            src='https://cdn.jsdelivr.net/npm/arabic-virtual-keyboard/+esm'
        ></script>
        <script
            src='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js'
        ></script>
        <link
            href='https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,100..1000;1,9..40,100..1000&display=swap'
            rel='stylesheet'
            media='print'
            onload="this.media='all'"
        />
        <meta name='generator' content={Astro.generator} />
        <title>{title}</title>
        <ViewTransitions />
    </head>
    <body>
        <aside></aside>
        <main>
            <Navigation />
            <slot />
        </main>
        <aside></aside>
    </body>
</html>

<style is:global>
    /* https://www.joshwcomeau.com/css/custom-css-reset/ */
    /*
          1. Use a more-intuitive box-sizing model.
        */

    *,
    *::before,
    *::after {
        box-sizing: border-box;
    }

    /*
          2. Remove default margin
        */

    * {
        margin: 0;
    }

    /*
          5. Improve media defaults
        */

    img,
    picture,
    video,
    canvas,
    svg {
        display: block;
        max-width: 100%;
    }

    /*
          6. Remove built-in form typography styles
        */

    input,
    button,
    textarea,
    select {
        font: inherit;
    }

    /*
          7. Avoid text overflows
        */

    p,
    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
        overflow-wrap: break-word;
    }

    /*
          8. Create a root stacking context
        */

    #root,
    #__next {
        isolation: isolate;
    }

    * {
        --brand-hue: 25;
        --brand-saturation: 100%;
        --brand-lightness: 75%;
        /* Light Theme */
        --brand-light: hsl(
            var(--brand-hue) var(--brand-saturation) var(--brand-lightness)
        );
        --text1-light: hsl(var(--brand-hue) var(--brand-saturation) 10%);
        --text2-light: hsl(var(--brand-hue) 30% 30%);
        --text3-light: hsl(var(--brand-hue) 30% 40%);
        --tile1-light: hsl(var(--brand-hue) 25% 85%);
        --tile2-light: hsl(var(--brand-hue) 20% 80%);
        --tile3-light: hsl(var(--brand-hue) 20% 75%);
        --tile4-light: hsl(var(--brand-hue) 20% 70%);
        --tile5-light: hsl(var(--brand-hue) 20% 65%);
        --tile6-light: hsl(var(--brand-hue) 20% 60%);
        --green-light: hsl(134, 26%, 40%);
        --red-light: hsl(0, 62%, 71%);
        --tile-shadow-light: var(--brand-hue) 10% 20%;
        --shadow-strength-light: 0.02;
        /* dim */
        --brand-dim: hsl(
            var(--brand-hue) calc(var(--brand-saturation) / 1.25)
                calc(var(--brand-lightness) / 1.25)
        );
        --text1-dim: hsl(var(--brand-hue) 15% 75%);
        --text2-dim: hsl(var(--brand-hue) 10% 61%);
        --text3-dim: hsl(var(--brand-hue) 10% 50%);
        --tile1-dim: hsl(var(--brand-hue) 10% 20%);
        --tile2-dim: hsl(var(--brand-hue) 10% 25%);
        --tile3-dim: hsl(var(--brand-hue) 5% 30%);
        --tile4-dim: hsl(var(--brand-hue) 5% 35%);
        --tile5-dim: hsl(var(--brand-hue) 5% 40%);
        --tile6-dim: hsl(var(--brand-hue) 5% 45%);
        --green-dim: hsl(128, 21%, 48%);
        --red-dim: hsl(0, 36%, 52%);
        --tile-shadow-dim: var(--brand-hue) 30% 13%;
        --shadow-strength-dim: 0.2;
        /* dark */
        --brand-dark: hsl(
            var(--brand-hue) calc(var(--brand-saturation) / 1.5)
                calc(var(--brand-lightness) / 1.5)
        );
        --text1-dark: hsl(var(--brand-hue) 15% 80%);
        --text2-dark: hsl(var(--brand-hue) 10% 70%);
        --text3-dark: hsl(var(--brand-hue) 10% 60%);
        --tile1-dark: hsl(var(--brand-hue) 10% 10%);
        --tile2-dark: hsl(var(--brand-hue) 10% 15%);
        --tile3-dark: hsl(var(--brand-hue) 5% 20%);
        --tile4-dark: hsl(var(--brand-hue) 5% 25%);
        --tile5-dark: hsl(var(--brand-hue) 10% 30%);
        --tile6-dark: hsl(var(--brand-hue) 15% 35%);
        --green-dark: hsl(124 5% 25%);
        --red-dark: hsl(0, 34%, 46%);
        --tile-shadow-dark: var(--brand-hue) 50% 3%;
        --shadow-strength-dark: 0.8;
    }

    :root {
        color-scheme: light;
        /* set defaults */
        --brand: var(--brand-light);
        --text1: var(--text1-light);
        --text2: var(--text2-light);
        --text3: var(--text3-light);
        --tile1: var(--tile1-light);
        --tile2: var(--tile2-light);
        --tile3: var(--tile3-light);
        --tile4: var(--tile4-light);
        --tile5: var(--tile5-light);
        --tile6: var(--tile6-light);
        --green1: var(--green-light);
        --red1: var(--red-light);
        --tile-shadow-light: var(--tile-shadow-light);
        --shadow-strength: var(--shadow-strength-light);
        --spacing: 0.35rem;
        --overlay: var(--spacing) calc(var(--spacing) * -3) var(--spacing)
            var(--spacing);
        --size-one: 10px;
        --size-two: 10px;
        --font-main: 'DM Sans', sans-serif;
        --link: var(--text1);
        --highlight: red;
    }

    [color-scheme='light'] {
        color-scheme: light;
        /* set defaults */
        --brand: var(--brand-light);
        --text1: var(--text1-light);
        --text2: var(--text2-light);
        --text3: var(--text3-light);
        --tile1: var(--tile1-light);
        --tile2: var(--tile2-light);
        --tile3: var(--tile3-light);
        --tile4: var(--tile4-light);
        --tile5: var(--tile5-light);
        --tile6: var(--tile6-light);
        --link: var(--text1);
        --highlight: red;
        --green1: var(--green-light);
        --red1: var(--red-light);
        --tile-shadow: var(--tile-shadow-light);
        --shadow-strength: var(--shadow-strength-light);
    }

    [color-scheme='dark'] {
        color-scheme: dark;
        --brand: var(--brand-dark);
        --text1: var(--text1-dark);
        --text2: var(--text2-dark);
        --text3: var(--text3-dark);
        --tile1: var(--tile1-dark);
        --tile2: var(--tile2-dark);
        --tile3: var(--tile3-dark);
        --tile4: var(--tile4-dark);
        --tile5: var(--tile5-dark);
        --tile6: var(--tile6-dark);
        --link: var(--brand);
        --highlight: var(--brand);
        --green1: var(--green-dark);
        --red1: var(--red-dark);
        --shadow-strength: var(--shadow-strength-dark);
    }

    body {
        line-height: 1.5;
        -webkit-font-smoothing: antialiased;
        background-color: var(--tile1);
        display: grid;
        grid-template-columns: 1fr min(100%, 1000px) 1fr;
    }

    aside {
        min-height: 100vh;
        height: 100%;
        background-color: var(--tile1);
        background-image: linear-gradient(
                to right,
                var(--tile3) 1px,
                transparent 1px
            ),
            linear-gradient(to bottom, var(--tile3) 1px, transparent 1px);
        background-size: 10px 10px;
        position: relative;
    }
    main {
        border-left: 1px solid var(--tile6);
        border-right: 1px solid var(--tile6);
        width: min(100%, 1000px);
        margin-inline: auto;
        background-color: var(--tile3);
        height: 100%;
        min-height: 100vh;
    }
</style>

<script is:inline>
    document.addEventListener('astro:page-load', () => {
        console.log('Hello! Thank you for visiting my website :)')
        const createFavicon = () => {
            const a = getComputedStyle(
                document.documentElement
            ).getPropertyValue('--brand')

            const canvas = document.createElement('canvas')
            canvas.width = 16
            canvas.height = 16
            const ctx = canvas.getContext('2d')
            ctx.fillStyle = a
            ctx.fillRect(0, 0, 16, 16)
            const existing = document.querySelector('.favicon')

            const head = document.getElementsByTagName('head')[0]
            if (existing) {
                head.removeChild(existing)
            }
            var link = document.createElement('link')
            link.classList.add('favicon')
            link.type = 'image/x-icon'
            link.rel = 'shortcut icon'
            link.href = canvas.toDataURL('image/x-icon')
            head.appendChild(link)
        }

        window.addEventListener('local-storage-update', (event) => {
            const colorScheme = localStorage.getItem('color-scheme')
            if (colorScheme === 'light') {
                const text1 = getComputedStyle(
                    document.documentElement
                ).getPropertyValue('--text1')

                root.style.setProperty('--link', text1)
            }

            if (colorScheme === 'dark') {
                const brand = getComputedStyle(
                    document.documentElement
                ).getPropertyValue('--brand')
                root.style.setProperty('--link', brand)
            }
            createFavicon()
        })

        const root = document.documentElement

        window.addEventListener('color-scheme-update', (event) => {
            const newColorScheme = event.detail.colorScheme

            if (newColorScheme === 'light') {
                const text1 = getComputedStyle(
                    document.documentElement
                ).getPropertyValue('--text1')

                root.style.setProperty('--link', text1)
            }

            if (newColorScheme === 'dark') {
                const brand = getComputedStyle(
                    document.documentElement
                ).getPropertyValue('--brand')
                root.style.setProperty('--link', brand)
            }
        })

        if (localStorage.getItem('--brand-hue')) {
            document.documentElement.style.setProperty(
                '--brand-hue',
                localStorage.getItem('--brand-hue')
            )
        }

        createFavicon()

        const colorScheme = localStorage.getItem('color-scheme')
        if (colorScheme === 'light') {
            const text1 = getComputedStyle(
                document.documentElement
            ).getPropertyValue('--text1')

            root.style.setProperty('--link', text1)
        }

        if (colorScheme === 'dark') {
            const brand = getComputedStyle(
                document.documentElement
            ).getPropertyValue('--brand')
            root.style.setProperty('--link', brand)
        }
    })
</script>
